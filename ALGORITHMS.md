# ALGORITHMS

## system deploy algorithm (w/ CallitConfig.sol)
    NOTE: new deployment algorithm
        - deploy CONFIG
        - deploy all contracts (log addies created)
        - invoke CONF.KEEPER_setContracts (w/ input: addies created)
            - invokes CONF_setConfig on all contracts

    NOTE: contract update algorithm
        - deploy contract (log addy created)
        - invoke CONF.KEEPER_setContracts (w/ input: addy created & 0x0 opt-out)
            - invokes CONF_setConfig on all contracts

    NOTE: contract update algorithm (CONFIG)
        - deploy CONF contract (w/ globals: addies from all contracts)
        - invoke CONF.KEEPER_setContracts (w/ input: addy created & 0x0 opt-out)
            - invokes CONF_setConfig on all contracts

## .sol file contract external functions
    - CallitFactory.sol
    - CallitDelegate.sol
        ADMIN_initPromoForWallet
        checkPromoBalance
    - CallitToken.sol
        setCallTokenVoteLock
        balanceOf_voteCnt
        setAcctHandle
    - CallitTicket.sol
    - CallitVault.sol
        deposit
    - CallitLib.sol

## PROOF for '_getCallTicketUsdTargetPrice' -> input '_ticket'
    // ABSTRACT: arb execution algortihm that ensures all ticket prices stay below $1.00
    //              and sum of all ticket prices for any given market == $1.00
    //
    // SOLUTION: if result target price <= 0, then set _ticket target price = $0.01
    //
    // ALGORITHMIC LOGIC ...
    //  calc sum of usd value dex prices for all addresses in '_mark.resultOptionTokens' (except input _ticket)
    //   -> input _ticket target price = 1 - SUM(all prices except _ticket)
    //   -> if result target price <= 0, then set _ticket target price = $0.01
    // 
    // PROOF ... (6 examples)
    //   ex0: 3 result options w/ ALL estimate prices < $1.00 ... (0)
    //      1) $0.60 -> if input _ticket, then result _ticket target price = $0.40 (valid)
    //      2) $0.40 -> if input _ticket, then result _ticket target price = $0.20 (valid)
    //      3) $0.20 -> if input _ticket, then result _ticket target price = $0.00 (invalid)
    //   ex0: 3 result options w/ ALL estimate prices < $1.00 ... (0)
    //      1) $0.60 -> if input _ticket, then result _ticket target price = $0.40 (valid)
    //      2) $0.40 -> if input _ticket, then result _ticket target price = $0.20 (valid)
    //      3) $0.20 -> if input _ticket, then result _ticket target price = $0.01 (valid)
        //   ex0: 3 result options w/ ALL estimate prices < $1.00 ... (1)
        //      1) $0.40 -> if input _ticket, then result _ticket target price = $0.40 (valid)
        //      2) $0.40 -> if input _ticket, then result _ticket target price = $0.40 (valid)
        //      3) $0.20 -> if input _ticket, then result _ticket target price = $0.20 (valid)
        //   ex0: 3 result options w/ ALL estimate prices < $1.00 ... (1)
        //      1) $0.60 -> if input _ticket, then result _ticket target price = $0.60 (valid)
        //      2) $0.20 -> if input _ticket, then result _ticket target price = $0.20 (valid)
        //      3) $0.20 -> if input _ticket, then result _ticket target price = $0.20 (valid)
        //   ex0: 3 result options w/ ALL estimate prices < $1.00 ... (1)
        //      1) $0.60 -> if input _ticket, then result _ticket target price = $0.59 (valid)
        //      2) $0.40 -> if input _ticket, then result _ticket target price = $0.39 (valid)
        //      3) $0.01 -> if input _ticket, then result _ticket target price = $0.01 (valid)
            //   ex0: 3 result options w/ ALL estimate prices < $1.00 ... (2)
            //      1) $0.59 -> if input _ticket, then result _ticket target price = $0.59 (valid)
            //      2) $0.40 -> if input _ticket, then result _ticket target price = $0.40 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price = $0.01 (valid)
            //   ex0: 3 result options w/ ALL estimate prices < $1.00 ... (2)
            //      1) $0.60 -> if input _ticket, then result _ticket target price = $0.60 (valid)
            //      2) $0.39 -> if input _ticket, then result _ticket target price = $0.39 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price = $0.01 (valid)

    //   ex1: 3 result options w/ ALL estimate prices < $1.00 ... (0)
    //      1) $0.60 -> if input _ticket, then result _ticket target price =  $0.00 (invalid)
    //      2) $0.80 -> if input _ticket, then result _ticket target price =  $0.20 (valid)
    //      3) $0.20 -> if input _ticket, then result _ticket target price = -$0.40 (invalid)
    //   ex1: 3 result options w/ ALL estimate prices < $1.00 ... (0)
    //      1) $0.60 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
    //      2) $0.80 -> if input _ticket, then result _ticket target price =  $0.20 (valid)
    //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //   ex1: 3 result options w/ ALL estimate prices < $1.00 ... (1)
        //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      2) $0.80 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
        //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.19 (valid)
            //   ex1: 3 result options w/ ALL estimate prices < $1.00 ... (2)
            //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      2) $0.79 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
            //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.20 (valid)
            //   ex1: 3 result options w/ ALL estimate prices < $1.00 ... (2)
            //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      2) $0.80 -> if input _ticket, then result _ticket target price =  $0.80 (valid)
            //      3) $0.19 -> if input _ticket, then result _ticket target price =  $0.19 (valid)
        //   ex1: 3 result options w/ ALL estimate prices < $1.00 ... (1)
        //      1) $0.60 -> if input _ticket, then result _ticket target price =  $0.60 (valid)
        //      2) $0.20 -> if input _ticket, then result _ticket target price =  $0.20 (valid)
        //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.20 (valid)
        //   ex1: 3 result options w/ ALL estimate prices < $1.00 ... (1)
        //      1) $0.60 -> if input _ticket, then result _ticket target price =  $0.19 (valid)
        //      2) $0.80 -> if input _ticket, then result _ticket target price =  $0.39 (valid)
        //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex1: 3 result options w/ ALL estimate prices < $1.00 ... (2)
            //      1) $0.19 -> if input _ticket, then result _ticket target price =  $0.19 (valid)
            //      2) $0.80 -> if input _ticket, then result _ticket target price =  $0.80 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)

    //   ex2: 3 result options w/ ALL estimate prices < $1.00 ... (0)
    //      1) $0.60 -> if input _ticket, then result _ticket target price = -$0.20 (invalid)
    //      2) $0.80 -> if input _ticket, then result _ticket target price =  $0.00 (invalid)
    //      3) $0.40 -> if input _ticket, then result _ticket target price = -$0.40 (invalid)
    //   ex2: 3 result options w/ ALL estimate prices < $1.00 ... (0)
    //      1) $0.60 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
    //      2) $0.80 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
    //      3) $0.40 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //   ex2: 3 result options w/ ALL estimate prices < $1.00 ... (1)
        //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      2) $0.80 -> if input _ticket, then result _ticket target price =  $0.59 (valid)
        //      3) $0.40 -> if input _ticket, then result _ticket target price =  $0.19 (valid)
            //   ex2: 3 result options w/ ALL estimate prices < $1.00 ... (2)
            //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      2) $0.59 -> if input _ticket, then result _ticket target price =  $0.59 (valid)
            //      3) $0.40 -> if input _ticket, then result _ticket target price =  $0.40 (valid)
        //   ex2: 3 result options w/ ALL estimate prices < $1.00 ... (1)
        //      1) $0.60 -> if input _ticket, then result _ticket target price =  $0.59 (valid)
        //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      3) $0.40 -> if input _ticket, then result _ticket target price =  $0.39 (valid)
            //   ex2: 3 result options w/ ALL estimate prices < $1.00 ... (2)
            //      1) $0.60 -> if input _ticket, then result _ticket target price =  $0.60 (valid)
            //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      3) $0.39 -> if input _ticket, then result _ticket target price =  $0.39 (valid)
        //   ex2: 3 result options w/ ALL estimate prices < $1.00 ... (1)
        //      1) $0.60 -> if input _ticket, then result _ticket target price =  $0.19 (valid)
        //      2) $0.80 -> if input _ticket, then result _ticket target price =  $0.39 (valid)
        //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex2: 3 result options w/ ALL estimate prices < $1.00 ... (2)
            //      1) $0.19 -> if input _ticket, then result _ticket target price =  $0.19 (valid)
            //      2) $0.80 -> if input _ticket, then result _ticket target price =  $0.80 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex2: 3 result options w/ ALL estimate prices < $1.00 ... (2)
            //      1) $0.60 -> if input _ticket, then result _ticket target price =  $0.60 (valid)
            //      2) $0.39 -> if input _ticket, then result _ticket target price =  $0.39 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)

    //   ex3: 3 result options w/ an estimate price > $1.00 ... (0)
    //      1) $1.20 -> if input _ticket, then result _ticket target price =  $0.40 (valid)
    //      2) $0.40 -> if input _ticket, then result _ticket target price = -$0.40 (invalid)
    //      3) $0.20 -> if input _ticket, then result _ticket target price = -$0.60 (invalid)
    //   ex3: 3 result options w/ an estimate price > $1.00 ... (0)
    //      1) $1.20 -> if input _ticket, then result _ticket target price =  $0.40 (valid)
    //      2) $0.40 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
    //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //   ex3: 3 result options w/ an estimate price > $1.00 ... (1)
        //      1) $0.40 -> if input _ticket, then result _ticket target price =  $0.40 (valid)
        //      2) $0.40 -> if input _ticket, then result _ticket target price =  $0.40 (valid)
        //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.20 (valid)
        //   ex3: 3 result options w/ an estimate price > $1.00 ... (1)
        //      1) $1.20 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
        //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex3: 3 result options w/ an estimate price > $1.00 ... (2)
            //      1) $0.79 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
            //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.20 (valid)
            //   ex3: 3 result options w/ an estimate price > $1.00 ... (2)
            //      1) $1.20 -> if input _ticket, then result _ticket target price =  $0.98 (valid)
            //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //   ex3: 3 result options w/ an estimate price > $1.00 ... (1)
        //      1) $1.20 -> if input _ticket, then result _ticket target price =  $0.59 (valid)
        //      2) $0.40 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex3: 3 result options w/ an estimate price > $1.00 ... (2)
            //      1) $0.59 -> if input _ticket, then result _ticket target price =  $0.59 (valid)
            //      2) $0.40 -> if input _ticket, then result _ticket target price =  $0.40 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex3: 3 result options w/ an estimate price > $1.00 ... (2)
            //      1) $1.20 -> if input _ticket, then result _ticket target price =  $0.98 (valid)
            //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)

    //   ex4: 3 result options w/ 2 estimate prices > $1.00 ... (0)
    //      1) $1.20 -> if input _ticket, then result _ticket target price = -$0.60 (invalid)
    //      2) $1.40 -> if input _ticket, then result _ticket target price = -$0.40 (invalid)
    //      3) $0.20 -> if input _ticket, then result _ticket target price = -$1.60 (invalid)
    //   ex4: 3 result options w/ 2 estimate prices > $1.00 ... (0)
    //      1) $1.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
    //      2) $1.40 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
    //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //   ex4: 3 result options w/ 2 estimate prices > $1.00 ... (1)
        //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      2) $1.40 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
        //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex4: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      2) $0.79 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
            //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.20 (valid)
            //   ex4: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      2) $1.40 -> if input _ticket, then result _ticket target price =  $0.98 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //   ex4: 3 result options w/ 2 estimate prices > $1.00 ... (1)
        //      1) $1.20 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
        //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex4: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $0.79 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
            //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.20 (valid)
            //   ex4: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $1.20 -> if input _ticket, then result _ticket target price =  $0.98 (valid)
            //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //   ex4: 3 result options w/ 2 estimate prices > $1.00 ... (1)
        //      1) $1.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      2) $1.40 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex4: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      2) $1.40 -> if input _ticket, then result _ticket target price =  $0.98 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex4: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $1.20 -> if input _ticket, then result _ticket target price =  $0.98 (valid)
            //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)

    //   ex5: 3 result options w/ 2 estimate prices > $1.00 ... (0)
    //      1) $0.99 -> if input _ticket, then result _ticket target price = -$0.60 (invalid)
    //      2) $1.40 -> if input _ticket, then result _ticket target price = -$0.19 (invalid)
    //      3) $0.20 -> if input _ticket, then result _ticket target price = -$1.60 (invalid)
    //   ex5: 3 result options w/ 2 estimate prices > $1.00 ... (0)
    //      1) $0.99 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
    //      2) $1.40 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
    //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //   ex5: 3 result options w/ 2 estimate prices > $1.00 ... (1)
        //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      2) $1.40 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
        //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex5: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      2) $0.79 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
            //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.20 (valid)
            //   ex5: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      2) $1.40 -> if input _ticket, then result _ticket target price =  $0.98 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //   ex5: 3 result options w/ 2 estimate prices > $1.00 ... (1)
        //      1) $0.99 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
        //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex5: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $0.79 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
            //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.20 (valid)
            //   ex5: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $0.99 -> if input _ticket, then result _ticket target price =  $0.98 (valid)
            //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //   ex5: 3 result options w/ 2 estimate prices > $1.00 ... (1)
        //      1) $0.99 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      2) $1.40 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex5: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      2) $1.40 -> if input _ticket, then result _ticket target price =  $0.98 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)

    //   ex6: 3 result options w/ 2 estimate prices > $1.00 ... (0)
    //      1) $0.99 -> if input _ticket, then result _ticket target price = -$0.19 (invalid)
    //      2) $0.99 -> if input _ticket, then result _ticket target price = -$0.19 (invalid)
    //      3) $0.20 -> if input _ticket, then result _ticket target price = -$0.98 (invalid)
    //   ex6: 3 result options w/ 2 estimate prices > $1.00 ... (0)
    //      1) $0.99 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
    //      2) $0.99 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
    //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //   ex6: 3 result options w/ 2 estimate prices > $1.00 ... (1)
        //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      2) $0.99 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
        //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex6: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      2) $0.99 -> if input _ticket, then result _ticket target price =  $0.98 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //   ex6: 3 result options w/ 2 estimate prices > $1.00 ... (1)
        //      1) $0.99 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
        //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex6: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $0.79 -> if input _ticket, then result _ticket target price =  $0.79 (valid)
            //      2) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      3) $0.20 -> if input _ticket, then result _ticket target price =  $0.20 (valid)
        //   ex6: 3 result options w/ 2 estimate prices > $1.00 ... (1)
        //      1) $0.99 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      2) $0.99 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
        //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //   ex6: 3 result options w/ 2 estimate prices > $1.00 ... (2)
            //      1) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)
            //      2) $0.99 -> if input _ticket, then result _ticket target price =  $0.98 (valid)
            //      3) $0.01 -> if input _ticket, then result _ticket target price =  $0.01 (valid)